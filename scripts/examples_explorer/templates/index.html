<!DOCTYPE html>
<html>
<head>
  <!-- Standard Meta -->
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <!-- Site Properties -->
  <title>Bokeh Examples Launcher</title>

  <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.4.min.js"></script>

  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.1.8/semantic.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.1.8/semantic.min.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.14.7/react.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.14.7/react-dom.js"></script>

  <link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.12.0/codemirror.min.css" rel="stylesheet" type="text/css">

   <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.12.0/codemirror.min.js"></script>
   <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.12.0/mode/javascript/javascript.min.js"></script>
   <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.12.0/mode/python/python.min.js"></script>


  <script>


  $(document)
    .ready(function() {

          reset_semantic();

          $('.ui.accordion').accordion();

          $('.tabular.menu .item').tab();

          // fix main menu to page on passing
          $('.main.menu').visibility({
            type: 'fixed'
          });
          $('.overlay').visibility({
            type: 'fixed',
            offset: 80
          });



         // lazy load images
         $('.image').visibility({
           type: 'image',
           transition: 'vertical flip in',
           duration: 500
         });

         // show dropdown on hover
         $('.main.menu  .ui.dropdown').dropdown({
           on: 'hover'
         });

         // prepare the SOURCE CODE EDITOR
         var template = $('#code_editor');
         var txtarea = template.find('textarea');

         window.cm = CodeMirror.fromTextArea(txtarea[0], {
                 lineNumbers: true,
                 matchBrackets: true
         });
         window.cm.setSize(800, 450);
         window.cm.setOption('mode', "python");
    })
  ;

  function reset_semantic(){
    $('.special.cards .image').dimmer({
     on: 'hover'
   });
  }

  function ask_feedback(example){
    console.log("WAS", example);
    window.selected_example = example;
    // $("#confirm_bug").onclick = "register_bug("+example+")";

    $("#confirm_bug").click(function () { register_bug(example); });


    $('.basic.test.modal')
      .modal('setting', 'closable', false)
      .modal('show');

  }

  function register_bug(example){
    var bug_report = $("#bug_report").val();
    var msg = {'id': example, "bug_report": bug_report};

    var jqxhr = $.post( "api/register_bug", msg, function(data) {
        register_example(data);
        // $("#"+data.id+"_and").visible();
      })
        .done(function(data) {
          // alert( "second success", data );
        })
        .fail(function() {
          // alert( "error" );
        })
        .always(function() {
      });

  }


  function run_example(path){
    show_loading(path);
    var jqxhr = $.post( "api/run", {'path': path}, function(data) {
      register_example(data);
      hide_loading(data.id);
    })
      .done(function(data) {
        // alert( "second success", data );
      })
      .fail(function() {
        // alert( "error" );
      })
      .always(function() {
        // alert( "finished" );
    });
  }

  function clear_session(){
    var jqxhr = $.post( "api/clear_session", function(data) {
        alert("session cleared");
        $('#session_cleared_modal')
          .modal('setting', 'closable', false)
          .modal('show');
      })
        .done(function(data) {
          // alert( "second success", data );
        })
        .fail(function() {
          // alert( "error" );
        })
        .always(function() {
          // alert( "finished" );
      });

  }


  jQuery.fn.visible = function() {
      return this.css('visibility', 'visible');
  };

  jQuery.fn.invisible = function() {
      return this.css('visibility', 'hidden');
  };

  jQuery.fn.visibilityToggle = function() {
      return this.css('visibility', function(i, visibility) {
          return (visibility == 'visible') ? 'hidden' : 'visible';
      });
  };


  </script>

  <style type="text/css">

  body {
    background-color: #FFFFFF;
  }
  .main.container {
    margin-top: 2em;
  }

  .main.menu {
    margin-top: 4em;
    border-radius: 0;
    border: none;
    box-shadow: none;
    transition:
      box-shadow 0.5s ease,
      padding 0.5s ease
    ;
  }
  .main.menu .item img.logo {
    margin-right: 1.5em;
  }

  img.example_img{
    height: 100px;
    width: 200px;
    overflow: hidden;
  }

  .overlay {
    float: left;
    margin: 0em 3em 1em 0em;
  }
  .overlay .menu {
    position: relative;
    left: 0;
    transition: left 0.5s ease;
  }

  .main.menu.fixed {
    background-color: #FFFFFF;
    border: 1px solid #DDD;
    box-shadow: 0px 3px 5px rgba(0, 0, 0, 0.2);
  }
  .overlay.fixed .menu {
    left: 800px;
  }

  .text.container .left.floated.image {
    margin: 2em 2em 2em -4em;
  }
  .text.container .right.floated.image {
    margin: 2em -4em 2em 2em;
  }

  .ui.footer.segment {
    margin: 5em 0em 0em;
    padding: 5em 0em;
  }
  </style>

</head>
<body>

  <!-- <div class="ui main text container">
    <h1 class="ui header">Bokeh Examples Launcher</h1>
    <p>Use this app to browse and run examples!</p>

    <p>Select one of the sections on the left to open it!</p>
  </div> -->

  <!-- MENU -->
  <div class="ui borderless main menu">
    <div class="ui text container">
      <div href="#" class="header item">
        <img class="logo" src="static/images/logo.png">
        Bokeh Examples Launcher
      </div>
      <a href="#" class="item" onclick="show_session();">Current Session</a>
      <a href="#" class="item" onclick="clear_session();">Clean Session</a>
      <a href="#" class="ui right floated dropdown item">
        Actions <i class="dropdown icon"></i>
        <div class="menu">
          <div class="item">Config</div>
          <div class="item">Start bokeh server</div>
          <div class="item">Start Jupyter Server</div>
          <div class="divider"></div>
          <div class="header">TEST</div>
          <div class="item">
            <i class="dropdown icon"></i>
            Create Envs & Test
            <div class="menu">
              <div class="item">Clean Conda PY 2.7</div>
              <div class="item">Upgraded Conda PY 2.7</div>
              <div class="item">Clean PIP PY 2.7</div>
              <div class="item">Upgraded PIP PY 2.7</div>
              <div class="item">Clean Conda PY 3.5</div>
              <div class="item">Upgraded Conda PY 3.5</div>
              <div class="item">Clean PIP PY 3.5</div>
              <div class="item">Upgraded PIP PY 3.5</div>
            </div>
          </div>
          <div class="item">Create all envs</div>
        </div>
      </a>
    </div>
  </div>


<div class="overlay fixed">
  <div class="ui vertical menu" style="left: 30px;">
    {% for entry in examples.my_folders %}
      {% if loop.index == -1 %}
      <a id="{{entry.id}}_menu_item" class="examples-menu-item teal item active" onclick="update_new_section('{{entry.shortname}}');">
      {% else %}
      <a id="{{entry.id}}_menu_item" class="examples-menu-item item" onclick="update_new_section('{{entry.shortname}}');">
      {% endif %}
        {{ entry.shortname }}
        {% if loop.index == -1 %}
        <div id="{{entry.id}}_menu_label" class="examples-menu-item ui teal label">{{ examples.count_folder_seen_files(entry) }} / {{ examples.count_folder_total_files(entry) }}</div>
        {% else %}
        <div id="{{entry.id}}_menu_label" class="examples-menu-item ui label">{{ examples.count_folder_seen_files(entry) }} / {{ examples.count_folder_total_files(entry) }}</div>
        {% endif %}

        <!-- <div class="ui teal pointing left label">1</div> -->
      </a>
    {% endfor %}

    <div class="item">
      <div class="ui transparent icon input">
        <input type="text" placeholder="Search ...">
        <i class="search icon"></i>
      </div>
    </div>
  </div>
</div>


<div id="main-container" class="ui text container">
  <div class="ui inverted circular segment" style="width: 700px;">
    <h2 class="ui inverted header">
      Welcome to Bokeh Launcher
      <!-- <div class="sub header">$10.99</div> -->
    </h2>

  </div>

  <h4 class="ui horizontal divider header" style="padding-top: 50px">
    <i class="tag icon"></i>
    Description
  </h4>


  <p>Bokeh examples launcher is an interactive web app built to help you explore
    and play with the examples provided by the project.</p>

    <h4 class="ui horizontal divider header" style="padding-top: 50px; ">
      <i class="find icon"></i>
      Discover
    </h4>
    <p>Use the left side menu to browse the example sections and to search for
    for specific feature examples by using the menu bottom search widget.

    Click on any menu item to get into the related section. Menu items show
    the number of examples available on that section and how many have been
    executed.</p>
</div>




<script src="/static/build/launcher.js"></script>


    <div class="ui small basic test modal hidden transition" style="margin-top: -123px; display: block !important;">
      <div class="ui icon header">
        <i class="bug icon"></i>
        Report a bug!
      </div>
      <div class="content">
        <div class="ui form">
          <div class="field">
            <label>Please add a brief description of the bug you have found:</label>
            <textarea id="bug_report" style="width: 90%; height: 150px; color: black;" data-gramm="" data-txt_gramm_id="052b37ee-1db0-f103-6974-4a265d57f9c8"></textarea>
          </div>
        </div>
      </div>
      <div class="actions">
        <div class="ui red basic cancel inverted button">
          <i class="remove icon"></i>
          No bugs!
        </div>
        <div class="ui green ok inverted button" id="confirm_bug">
          <i class="checkmark icon"></i>
          Comfirm Bug
        </div>
      </div>
    </div>

    <div id="session_cleared_modal" class="ui small basic test modal hidden transition" style="margin-top: -123px; display: block !important;">
      <div class="ui icon header">
        <i class="bug icon"></i>
        Yes.. we cleared your session!
      </div>
      <div class="content">
      </div>
      <div class="actions">
        <div class="ui red basic cancel inverted button">
          <i class="remove icon"></i>
          Close
        </div>
      </div>
    </div>


    <div id="source_text_dlg" class="ui small basic test modal hidden transition" style="margin-top: -123px; display: block !important;">
      <div class="ui icon header">
        <i class="code icon"></i>
      </div>
      <div class="content">

        <div id='code_editor' style='height: 450px;'>
            <textarea  style='height: 450px;'></textarea>
        </div>

      </div>
      <div class="actions">
        <div class="ui red basic cancel inverted button">
          <i class="remove icon"></i>
          Close
        </div>
      </div>
    </div>


</body>

</html>
